var Fisarmonica=function(e){var t,a,i,r={},s=Object.assign({keepPanelsOpen:!1,selector:"[data-fisarmonica]"},e),o="fisarmonica",c="js-is-hidden",n="js-focus",l=document.querySelector(s.selector);function u(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}r.open=function(e){return f(e,"open")},r.close=function(e){return f(e,"close")},r.disable=function(e){return f(e,"disable")},r.enable=function(e){return f(e,"enable")};function d(e){e.target.matches("button")&&(x(e.target),l.classList.add(n),e.preventDefault())}var f=function(n,r){i.forEach(function(e,t){"open"===r?n?n.includes(t)&&e.classList.remove(c):e.classList.remove(c):"close"===r&&(n?n.includes(t)&&e.classList.add(c):e.classList.add(c))}),a.forEach(function(e,t){"open"===r?n?n.includes(t)&&(e.setAttribute("aria-expanded",!0),1===n.length&&e.focus()):e.setAttribute("aria-expanded",!0):"close"===r?n?n.includes(t)&&e.setAttribute("aria-expanded",!1):e.setAttribute("aria-expanded",!1):"disable"===r?n?n.includes(t)&&e.setAttribute("disabled",!0):e.setAttribute("disabled",!0):"enable"===r&&(n?n.includes(t)&&e.removeAttribute("disabled"):e.removeAttribute("disabled"))})},x=function(e){var t=Array.from(a).indexOf(e);if(!s.keepPanelsOpen){var n=Array.apply(null,Array(a.length)).map(function(e,t){return t}).filter(function(e){return e!==t});r.close(n)}"false"===e.getAttribute("aria-expanded")?r.open([t]):r.close([t])};return l?(function(){l.classList.add(o);var n=u(),r=u();t=Array.from(l.querySelectorAll("dt")),a=Array.from(l.querySelectorAll("dt > button")),i=Array.from(l.querySelectorAll("dd")),t.forEach(function(e){e.classList.add(o+"-title")}),a.forEach(function(e,t){e.classList.add(o+"-button"),e.innerHTML='<span class="'+o+'-button-text">'+e.innerHTML+'</span><span aria-hidden="true" class="'+o+'-button-icon"></span>',e.setAttribute("aria-controls",o+"-"+n+"-"+t),e.setAttribute("id",o+"-"+r+"-"+t)}),i.forEach(function(e,t){e.classList.add(o+"-panel"),e.setAttribute("id",o+"-"+n+"-"+t),e.setAttribute("aria-labelledby",o+"-"+r+"-"+t)})}(),function(){if(s.theme)for(var e in s.theme)l.style.setProperty("--"+e,s.theme[e])}(),a.forEach(function(e){e.addEventListener("focus",function(){l.classList.add(n)}),e.addEventListener("blur",function(){l.classList.remove(n)})}),l.addEventListener("keydown",function(e){var t=event.which.toString(),n=event.target,r=a.indexOf(n);-1!==r&&("40"===t||"38"===t||"36"===t||"35"===t?("40"===t||"38"===t?r="40"===t?r+1===a.length?0:r+1:r-1==-1?a.length-1:r-1:"36"===t?r=0:"35"===t&&(r=a.length-1),a[r].focus(),e.preventDefault()):"13"===t&&(x(a[r]),e.preventDefault()))}),r.close(),l.addEventListener("click",d,!1)):console.warn("Cannot find an fisarmonica with class"+s.selector),r};