var Fisarmonica=function(e){var t,r,i,a={},s=Object.assign({keepPanelsOpen:!1,selector:"[data-fisarmonica]"},e),o="fisarmonica",c="js-is-hidden",n="js-focus",l=document.querySelector(s.selector);function d(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",n=t.length,a=0;a<8;a++)e+=t.charAt(Math.floor(Math.random()*n));return e}a.open=function(e){return f(e,"open")},a.close=function(e){return f(e,"close")},a.disable=function(e){return f(e,"disable")},a.enable=function(e){return f(e,"enable")};function u(e){console.log(e.target.parentElement),e.target.matches("button")&&(b(e.target),l.classList.add(n),e.preventDefault())}var f=function(n,a){i.forEach(function(e,t){"open"===a?n?n.includes(t)&&e.classList.remove(c):e.classList.remove(c):"close"===a&&(n?n.includes(t)&&e.classList.add(c):e.classList.add(c))}),r.forEach(function(e,t){"open"===a?n?n.includes(t)&&(e.setAttribute("aria-expanded",!0),1===n.length&&e.focus()):e.setAttribute("aria-expanded",!0):"close"===a?n?n.includes(t)&&e.setAttribute("aria-expanded",!1):e.setAttribute("aria-expanded",!1):"disable"===a?n?n.includes(t)&&e.setAttribute("disabled",!0):e.setAttribute("disabled",!0):"enable"===a&&(n?n.includes(t)&&e.removeAttribute("disabled"):e.removeAttribute("disabled"))})},b=function(e){var t=Array.from(r).indexOf(e);if(!s.keepPanelsOpen){var n=Array.apply(null,Array(r.length)).map(function(e,t){return t}).filter(function(e){return e!==t});a.close(n)}"false"===e.getAttribute("aria-expanded")?a.open([t]):a.close([t])};return l?(t=Array.from(l.querySelectorAll("dt")),r=Array.from(l.querySelectorAll("dt > button")),i=Array.from(l.querySelectorAll("dd")),a.close(),function(){l.classList.add(o);var n=d(),a=d();t.forEach(function(e){e.classList.add(o+"-title")}),r.forEach(function(e,t){e.classList.add(o+"-button"),e.innerHTML='<span class="'+o+'-button-text">'+e.innerHTML+'</span><span aria-hidden="true" class="'+o+'-button-icon"></span>',e.setAttribute("aria-controls","fisarmonica-panel-"+n+"-"+t),e.setAttribute("id","fisarmonica-panel-"+a+"-"+t)}),i.forEach(function(e,t){e.classList.add(o+"-panel"),e.setAttribute("id","fisarmonica-panel-"+n+"-"+t),e.setAttribute("aria-labelledby","fisarmonica-panel-"+a+"-"+t)})}(),function(){if(s.theme)for(var e in s.theme)l.style.setProperty("--"+e,s.theme[e])}(),r.forEach(function(e){e.addEventListener("focus",function(){l.classList.add(n)}),e.addEventListener("blur",function(){l.classList.remove(n)})}),l.addEventListener("keydown",function(e){var t=event.which.toString(),n=event.target,a=r.indexOf(n);-1!==a&&("40"===t||"38"===t||"36"===t||"35"===t?("40"===t||"38"===t?a="40"===t?a+1===r.length?0:a+1:a-1==-1?r.length-1:a-1:"36"===t?a=0:"35"===t&&(a=r.length-1),r[a].focus(),e.preventDefault()):"13"===t&&(b(r[a]),e.preventDefault()))}),l.addEventListener("click",u,!1)):console.warn("Cannot find an fisarmonica with class"+s.selector),a};