var Fisarmonica=function(e){var t,n,r,a={},i=Object.assign({keepPanelsOpen:!1,selector:"[data-fisarmonica]"},e),s="fisarmonica",o="js-is-hidden",c="js-focus",l=document.querySelector(i.selector);function u(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}a.open=function(e){return d(e,"open")},a.close=function(e){return d(e,"close")},a.disable=function(e){return d(e,"disable")},a.enable=function(e){return d(e,"enable")};var d=function(e,t){r.forEach(function(n,r){"open"===t?e?e.includes(r)&&n.classList.remove(o):n.classList.remove(o):"close"===t&&(e?e.includes(r)&&n.classList.add(o):n.classList.add(o))}),n.forEach(function(n,r){"open"===t?e?e.includes(r)&&(n.setAttribute("aria-expanded",!0),1===e.length&&n.focus()):n.setAttribute("aria-expanded",!0):"close"===t?e?e.includes(r)&&n.setAttribute("aria-expanded",!1):n.setAttribute("aria-expanded",!1):"disable"===t?e?e.includes(r)&&n.setAttribute("disabled",!0):n.setAttribute("disabled",!0):"enable"===t&&(e?e.includes(r)&&n.removeAttribute("disabled"):n.removeAttribute("disabled"))})},f=function(e){e.target.matches("button")&&(x(e.target),l.classList.add(c),e.preventDefault())},x=function(e){var t=Array.from(n).indexOf(e);if(!i.keepPanelsOpen){var r=Array.apply(null,Array(n.length)).map(function(e,t){return t}).filter(function(e){return e!==t});a.close(r)}"false"===e.getAttribute("aria-expanded")?a.open([t]):a.close([t])};return l?(function(){l.classList.add(s);var e=u(),a=u();t=Array.from(l.querySelectorAll("dt")),n=Array.from(l.querySelectorAll("dt > button")),r=Array.from(l.querySelectorAll("dd")),t.forEach(function(e){e.classList.add(s+"-title")}),n.forEach(function(t,n){t.classList.add(s+"-button"),t.innerHTML='<span class="'+s+'-button-text">'+t.innerHTML+'</span><span aria-hidden="true" class="'+s+'-button-icon"></span>',t.setAttribute("aria-controls",s+"-"+e+"-"+n),t.setAttribute("id",s+"-"+a+"-"+n)}),r.forEach(function(t,n){t.classList.add(s+"-panel"),t.setAttribute("id",s+"-"+e+"-"+n),t.setAttribute("aria-labelledby",s+"-"+a+"-"+n)})}(),function(){if(i.theme)for(var e in i.theme)l.style.setProperty("--"+e,i.theme[e])}(),n.forEach(function(e){e.addEventListener("focus",function(){l.classList.add(c)}),e.addEventListener("blur",function(){l.classList.remove(c)})}),l.addEventListener("keydown",function(e){var t=event.which.toString(),r=event.target,a=n.indexOf(r);-1!==a&&("40"===t||"38"===t||"36"===t||"35"===t?("40"===t||"38"===t?a="40"===t?a+1===n.length?0:a+1:a-1==-1?n.length-1:a-1:"36"===t?a=0:"35"===t&&(a=n.length-1),n[a].focus(),e.preventDefault()):"13"===t&&(x(n[a]),e.preventDefault()))}),a.close(),l.addEventListener("click",f,!1)):console.warn("Cannot find an fisarmonica with class"+i.selector),a};